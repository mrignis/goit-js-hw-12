{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// main.js\nimport axios from 'axios';\nimport { Notify } from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42103820-367af78541649bbd92098b568';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst endCollectionText = document.querySelector('.end-collection-text');\n\nlet currentPage = 1;\nlet searchQuery = '';\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nloadMoreBtn.classList.add('is-hidden');\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  currentPage = 1;\n  searchQuery = event.currentTarget.elements.searchQuery.value.trim();\n  gallery.innerHTML = '';\n  await fetchImages();\n}\n\nasync function fetchImages() {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: 15,\n        page: currentPage,\n      },\n    });\n\n    const { hits, totalHits } = response.data;\n\n    if (hits.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    } else {\n      renderImages(hits);\n      Notify.success(`Hooray! We found ${totalHits} images.`);\n      if (hits.length < 15) {\n        loadMoreBtn.classList.add('is-hidden');\n        endCollectionText.classList.remove('is-hidden');\n      } else {\n        loadMoreBtn.classList.remove('is-hidden');\n        endCollectionText.classList.add('is-hidden');\n      }\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    Notify.failure(\"We're sorry, but there was an error fetching images.\");\n  }\n}\n\nasync function onLoadMore() {\n  currentPage++;\n  await fetchImages();\n}\n\nfunction renderImages(images) {\n  const markup = images\n    .map(image => {\n      return `\n                <a href=\"${image.largeImageURL}\" class=\"photo-card\" data-lightbox=\"gallery\">\n                    <div class=\"thumb\">\n                        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                    </div>\n                    <div class=\"info\">\n                        <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n                        <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n                        <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n                        <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n                    </div>\n                </a>\n            `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n\n  // Remove the \"is-hidden\" class from the \"Load more\" button\n  loadMoreBtn.classList.remove('is-hidden');\n}\n"],"names":["BASE_URL","API_KEY","form","gallery","loadMoreBtn","endCollectionText","currentPage","searchQuery","onSubmit","onLoadMore","event","fetchImages","response","axios","hits","totalHits","Notify","renderImages","error","images","markup","image","SimpleLightbox"],"mappings":"owBAMA,MAAMA,EAAW,2BACXC,EAAU,qCAEVC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAoB,SAAS,cAAc,sBAAsB,EAEvE,IAAIC,EAAc,EACdC,EAAc,GAElBL,EAAK,iBAAiB,SAAUM,CAAQ,EACxCJ,EAAY,iBAAiB,QAASK,CAAU,EAEhDL,EAAY,UAAU,IAAI,WAAW,EAErC,eAAeI,EAASE,EAAO,CAC7BA,EAAM,eAAc,EACpBJ,EAAc,EACdC,EAAcG,EAAM,cAAc,SAAS,YAAY,MAAM,OAC7DP,EAAQ,UAAY,GACpB,MAAMQ,EAAW,CACnB,CAEA,eAAeA,GAAc,CAC3B,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIb,EAAU,CACzC,OAAQ,CACN,IAAKC,EACL,EAAGM,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMD,CACP,CACP,CAAK,EAEK,CAAE,KAAAQ,EAAM,UAAAC,GAAcH,EAAS,KAEjCE,EAAK,SAAW,EAClBE,EAAAA,OAAO,QACL,0EACR,GAEMC,EAAaH,CAAI,EACjBE,EAAM,OAAC,QAAQ,oBAAoBD,CAAS,UAAU,EAClDD,EAAK,OAAS,IAChBV,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAkB,UAAU,OAAO,WAAW,IAE9CD,EAAY,UAAU,OAAO,WAAW,EACxCC,EAAkB,UAAU,IAAI,WAAW,GAGhD,OAAQa,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CF,SAAO,QAAQ,sDAAsD,CACtE,CACH,CAEA,eAAeP,GAAa,CAC1BH,IACA,MAAMK,EAAW,CACnB,CAEA,SAASM,EAAaE,EAAQ,CAC5B,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA,2BACcA,EAAM,aAAa;AAAA;AAAA,oCAEVA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,6DAGbA,EAAM,KAAK;AAAA,6DACXA,EAAM,KAAK;AAAA,gEACRA,EAAM,QAAQ;AAAA,iEACbA,EAAM,SAAS;AAAA;AAAA;AAAA,aAI3E,EACA,KAAK,EAAE,EAEVlB,EAAQ,mBAAmB,YAAaiB,CAAM,EAE7B,IAAIE,EAAe,aAAc,CAChD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClB,CAAG,EAGDlB,EAAY,UAAU,OAAO,WAAW,CAC1C"}