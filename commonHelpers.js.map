{"version":3,"file":"commonHelpers.js","sources":["../src/public/image.js","../src/main.js"],"sourcesContent":["// image.js\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42103820-367af78541649bbd92098b568';\n\nexport default class ImagesApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async getImage() {\n    try {\n      const response = await axios.get(BASE_URL, {\n        params: {\n          key: API_KEY,\n          q: this.searchQuery,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: 'true',\n          per_page: 40,\n          page: this.page,\n        },\n      });\n\n      this.page += 1;\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching images:', error);\n      throw error;\n    }\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","// main.js\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport ImagesApiService from './public/image';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst imageApiService = new ImagesApiService();\nconst form = document.querySelector('form#search-form');\nconst gallery = document.querySelector('div.gallery');\nconst loadMoreBtn = document.querySelector('button.load-more');\nlet currentPage = 1;\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nloadMoreBtn.classList.add('is-hidden');\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  imageApiService.query = e.currentTarget.elements.searchQuery.value.trim();\n  imageApiService.resetPage();\n  if (imageApiService.query === '') {\n    Notify.info('Please enter your search query!');\n    return;\n  }\n\n  try {\n    const { data } = await imageApiService.getImage(currentPage);\n    let queriesArray = data.hits;\n    if (queriesArray.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    } else {\n      renderImages(queriesArray);\n      loadMoreBtn.classList.remove('is-hidden');\n      Notify.success(`Hooray! We found ${data.totalHits} images.`);\n    }\n  } catch (error) {\n    Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    console.log(error);\n  }\n}\n\nasync function onLoadMore() {\n  currentPage++;\n  try {\n    const { data } = await imageApiService.getImage(currentPage);\n    let queriesArray = data.hits;\n    renderImages(queriesArray);\n    if (queriesArray.length < 15) {\n      loadMoreBtn.classList.add('is-hidden');\n      Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction renderImages(queriesArray) {\n  const markup = queriesArray\n    .map(item => {\n      return `<a href=\"${item.largeImageURL}\" class=\"photo-card\" data-lightbox=\"gallery\">\n        <div class=\"thumb\"><img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" /></div>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b><span>${item.likes}</span></p>\n          <p class=\"info-item\"><b>Views</b><span>${item.views}</span></p>\n          <p class=\"info-item\"><b>Comments</b><span>${item.comments}</span></p>\n          <p class=\"info-item\"><b>Downloads</b><span>${item.downloads}</span></p>\n        </div>\n      </a>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n}\n"],"names":["BASE_URL","API_KEY","ImagesApiService","response","axios","error","newQuery","imageApiService","form","gallery","loadMoreBtn","currentPage","onSubmit","onLoadMore","e","Notify","data","queriesArray","renderImages","markup","item","SimpleLightbox"],"mappings":"owBAGA,MAAMA,EAAW,2BACXC,EAAU,qCAED,MAAMC,CAAiB,CACpC,aAAc,CACZ,KAAK,YAAc,GACnB,KAAK,KAAO,CACb,CAED,MAAM,UAAW,CACf,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKC,EACL,EAAG,KAAK,YACR,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAM,KAAK,IACZ,CACT,CAAO,EAED,YAAK,MAAQ,EACNE,EAAS,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACF,CAED,WAAY,CACV,KAAK,KAAO,CACb,CAED,IAAI,OAAQ,CACV,OAAO,KAAK,WACb,CAED,IAAI,MAAMC,EAAU,CAClB,KAAK,YAAcA,CACpB,CACH,CCvCA,MAAMC,EAAkB,IAAIL,EACtBM,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAc,SAAS,cAAc,kBAAkB,EAC7D,IAAIC,EAAc,EAElBH,EAAK,iBAAiB,SAAUI,CAAQ,EACxCF,EAAY,iBAAiB,QAASG,CAAU,EAEhDH,EAAY,UAAU,IAAI,WAAW,EAErC,eAAeE,EAASE,EAAG,CAKzB,GAJAA,EAAE,eAAc,EAChBL,EAAQ,UAAY,GACpBF,EAAgB,MAAQO,EAAE,cAAc,SAAS,YAAY,MAAM,OACnEP,EAAgB,UAAS,EACrBA,EAAgB,QAAU,GAAI,CAChCQ,SAAO,KAAK,iCAAiC,EAC7C,MACD,CAED,GAAI,CACF,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMT,EAAgB,SAASI,CAAW,EAC3D,IAAIM,EAAeD,EAAK,KACpBC,EAAa,SAAW,EAC1BF,EAAAA,OAAO,QACL,0EACR,GAEMG,EAAaD,CAAY,EACzBP,EAAY,UAAU,OAAO,WAAW,EACxCK,EAAM,OAAC,QAAQ,oBAAoBC,EAAK,SAAS,UAAU,EAE9D,OAAQX,EAAO,CACdU,SAAO,KAAK,4DAA4D,EACxE,QAAQ,IAAIV,CAAK,CAClB,CACH,CAEA,eAAeQ,GAAa,CAC1BF,IACA,GAAI,CACF,KAAM,CAAE,KAAAK,CAAI,EAAK,MAAMT,EAAgB,SAASI,CAAW,EAC3D,IAAIM,EAAeD,EAAK,KACxBE,EAAaD,CAAY,EACrBA,EAAa,OAAS,KACxBP,EAAY,UAAU,IAAI,WAAW,EACrCK,SAAO,KAAK,4DAA4D,EAE3E,OAAQV,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEA,SAASa,EAAaD,EAAc,CAClC,MAAME,EAASF,EACZ,IAAIG,GACI,YAAYA,EAAK,aAAa;AAAA,uCACJA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA,mDAExBA,EAAK,KAAK;AAAA,mDACVA,EAAK,KAAK;AAAA,sDACPA,EAAK,QAAQ;AAAA,uDACZA,EAAK,SAAS;AAAA;AAAA,WAGhE,EACA,KAAK,EAAE,EACVX,EAAQ,mBAAmB,YAAaU,CAAM,EAE7B,IAAIE,EAAe,aAAc,CAChD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClB,CAAG,CACH"}